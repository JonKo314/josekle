<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Josekle debug mode</title>
  <link href="css/besogo.css" rel="stylesheet" />
  <style>
    div#container {
        display: flex;
        flex-direction: row;
    }
    div#input-board {
        width: 800px !important;
        height: 800px;
    }
    .besogo-board {
        width: 800px !important;
        height: 800px !important;
    }
    .besogo-panels {
        display: none !important;
    }
  </style>
  <script src="besogo.all.js"></script>
  <script>
    window.onload = function() {
        const nodeId=parseInt(document.location.href.split("#")[1]);
        fetch('/sgf/puzzles.json')
            .then(response => response.json())
            .then(puzzles => {
                const puzzle = puzzles[Math.floor(Math.random()*puzzles.length)];
                const nodeId = puzzle["node_id"];
                const sgf = puzzle["sgf"];
                document.querySelector("#oje").src="https://online-go.com/joseki/" + nodeId;
                const besogoBoard = document.createElement('div');
                besogoBoard.id="input-board";
                besogoBoard.classList.add("besogo-editor");
                besogoBoard.coord="western";
                besogoBoard.innerText=sgf;
                //besogoBoard.panels="control+tree";
                document.querySelector("div#container").appendChild(besogoBoard);
                besogo.autoInit();
                while (undefined === document.querySelector('#input-board').editor.nextNode(1)){}
            });
    }
  </script>
</head>
<body>
    <div id="container">
        <iframe id="oje" width="800" height="800" title="OGS Joseki Explorer" src=""></iframe>
    </div>
</body>
</html>
